(this.webpackJsonpvte=this.webpackJsonpvte||[]).push([[0],{173:function(e,t,n){e.exports={panel:"ChartConfigPanel_panel__1RNdy",picker:"ChartConfigPanel_picker__2a-s5",color:"ChartConfigPanel_color__20B1t"}},329:function(e,t,n){e.exports={link:"Link_link__1gb_b",potentialLink:"Link_potentialLink__1rq0F"}},330:function(e,t,n){e.exports={container:"ChartGallery_container__1wEZt",draggingArea:"ChartGallery_draggingArea__1Gg2j"}},473:function(e){e.exports=JSON.parse('{"$schema":"https://vega.github.io/schema/vega/v5.json","description":"A simple bar chart with embedded data.","background":"white","padding":5,"width":300,"height":200,"style":"cell","data":[{"name":"source_0","values":[{"category":"Apple","amount":28},{"category":"Amazon","amount":55},{"category":"Facebook","amount":43},{"category":"Netflix","amount":91},{"category":"Microsoft","amount":81},{"category":"Samsung","amount":53},{"category":"Twitter","amount":19},{"category":"Linkedin","amount":87}]},{"name":"data_0","source":"source_0","transform":[{"type":"filter","expr":"isValid(datum[\\"amount\\"]) && isFinite(+datum[\\"amount\\"])"}]}],"marks":[{"name":"marks","type":"rect","style":["bar"],"from":{"data":"data_0"},"encode":{"update":{"fill":{"value":"#4c78a8"},"x":{"scale":"x","field":"category"},"width":{"scale":"x","band":1},"y":{"scale":"y","field":"amount"},"y2":{"scale":"y","value":0}}}}],"scales":[{"name":"x","type":"band","domain":{"data":"data_0","field":"category","sort":true},"range":[0,{"signal":"width"}],"paddingInner":0.1,"paddingOuter":0.05},{"name":"y","type":"linear","domain":{"data":"data_0","field":"amount"},"range":[{"signal":"height"},0],"nice":true,"zero":true}],"axes":[{"scale":"y","orient":"left","gridScale":"x","grid":true,"tickCount":{"signal":"ceil(height/40)"},"domain":false,"labels":false,"maxExtent":0,"minExtent":0,"ticks":false,"zindex":0},{"scale":"x","orient":"bottom","grid":false,"title":"category","labelAngle":90,"labelAlign":"left","labelBaseline":"middle","labelOverlap":true,"zindex":0},{"scale":"y","orient":"left","grid":false,"title":"amount","labelOverlap":true,"tickCount":{"signal":"ceil(height/40)"},"zindex":0}]}')},474:function(e){e.exports=JSON.parse('{"$schema":"https://vega.github.io/schema/vega-lite/v4.json","description":"A simple bar chart with embedded data.","width":300,"height":200,"data":{"values":[{"category":"Apple","amount":28},{"category":"Amazon","amount":55},{"category":"Facebook","amount":43},{"category":"Netflix","amount":91},{"category":"Microsoft","amount":81},{"category":"Samsung","amount":53},{"category":"Twitter","amount":19},{"category":"Linkedin","amount":87}]},"mark":"bar","encoding":{"x":{"field":"category","type":"ordinal","axis":{"labelAngle":90}},"y":{"field":"amount","type":"quantitative"}}}')},481:function(e,t,n){e.exports={viewer:"Viewer_viewer__HAVcj"}},489:function(e,t,n){e.exports={textSelection:"HighlightTextSelection_textSelection__1oqm1"}},490:function(e,t,n){e.exports={container:"Chart_container__yFe1W"}},491:function(e,t,n){e.exports={editor:"Editor_editor__3K1fD"}},492:function(e,t,n){e.exports={suggestionPanel:"SuggestionPanel_suggestionPanel__2D0HC"}},493:function(e,t,n){e.exports={potentialLinkControls:"PotentialLinkControls_potentialLinkControls__2Lyp9"}},527:function(e,t,n){e.exports=n(930)},532:function(e,t,n){},734:function(e,t){},736:function(e,t){},766:function(e,t){},767:function(e,t){},773:function(e,t){},813:function(e,t){},815:function(e,t){},838:function(e,t){},930:function(e,t,n){"use strict";n.r(t);var a=n(20),r=n(1),i=n.n(r),c=n(31),l=n.n(c),o=(n(532),n(61)),u=n(1001),s=n(1003),d=n(1005),g=n(937),f=n(1006),h=n(1007),m=n(19),p=n(5),v=n(502),b=Object(v.a)("1234567890abcdefghijklmnopqrstuvwxyz",10),E=function(e){return e?e+b():b()},y=n(473),O=n(474),S=n(199),k=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=E("chart-");return{type:"CREATE_CHART",chartId:i,attrs:r=Object(a.a)({docId:e,spec:t,liteSpec:n,timestamp:Date.now(),highlight:{channel:"opacity",active:1,inactive:.1}},r,{id:i})}},j=function(e,t){return{type:"UPDATE_CHART",chartId:e,attrs:t}},x=Object(S.a)((function(e){return e.docs}),(function(e){return e.charts}),(function(e,t){return t}),(function(e,t,n){return e[n].charts.map((function(e){return t[e]}))})),I=Object(S.a)((function(e){return e.docs}),(function(e){return e.charts}),(function(e,t){return t}),(function(e,t,n){return e[n].chartsInEditor.map((function(e){return t[e]}))})),A={testchart:{id:"testchart",docId:"testdoc",timestamp:Date.now(),thumbnail:"data:image/png;base64,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Tp8+XcrKymTGjBkydepUKS0tlfnz53tDKYXaQQObQpfUIzb2y8Y+EStvGmajDG3sUxh6ZZx09+zZI926dZMVK1YI/l1eXi55eXneNCqF2nEVeApQWTkRhPFxEKtUENB/Jq7foHHSdUS0fv16admypdSvX19famnUjKvAU4GMWOmjRqyIlRsC1pCuW0f9/j026c477zy/m027PRv7ZWOfALSN/bKxT8TK22cZtAxjS7rexMDaRIAIEAF/EIgV6X755Zfy97//XX70ox+pE3A2FBv7ZAMu7EPmI4A9HBz9t7m88sor0rlzZxXK6leJFenu3btXzjrrLMHR4+uuu0569eolJ510kl9YptSOjX3CQPBBXHbZZUnH9Nhjj4WOHeKzzzzzzKR9mjZtmpx++ukpySGdh9Cv2t770ksvSadOndJ5hednbcUKA/nrX/8qd955pwwbNkwuvPBCuffee+Vf//qXDBo0SC655BLPYw3yAWzyDx8+XM4++2zfXhMr0nVQW7ZsmfLnYpbFybdrr71WrrzySmnatKlvwHptyLY+HThwQN54443KYdx6663qozjhhBNk8ODB8tRTT/mqiDp4ffHFF3LcccfJrFmzaqyOQPRGjRrpNOVrnUOHDqlTlE5BDpEXXnhBxo0bp/QL4ZDf+MY3fH2nW2Po0/vvv1+t2sqVK+WGG25QG9avv/66OnJvogCLxx9/XH784x8L0gAgYgk5V/Ados9HHXVU6N2C8VNTueKKK9SkQNL1QSRYLnz66acyZ84ceeihh+S1115Ts+2pp57qQ+upNWFjn5yRYJIaP368sm67dOmiPhY/FVEHMZAuPtiNGzfqVA+1zmeffSZ/+ctfZNKkSSpxU58+fdQpy29/+9uSlZUVal8SX7Z//355+OGHVX6T3/72t3LLLbeEFiWU2BeQKo78L126VP0KS3dYvJdeeqn069dPGT+JJ7iCBg961bhx46SvWbhwoa+6HktLF+iC4EaPHi3PPvuswG/TvXt3efTRR43N/rb2iaTr/skjQROss44dO8of//hHtYoyTbROr3Gk/pprrpF27dqpQ0g4Xm+yfP755+pbQ4QAJk9Y3Vu3blWrTEzozz//vJxxxhmhd3HHjh01vhMTJyYrPw2MWJEullywaHHy7emnn5bvfe97anb92c9+JkcffXTogsYLbexTTUD84he/EBzZ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",highlight:{channel:"opacity",active:1,inactive:.1},properties:{axes:[{name:"x",field:"category",data:"data_0",type:"ordinal",title:"category"},{name:"y",field:"amount",data:"data_0",type:"linear",title:"amount"}],features:[{value:"Apple",type:"string",field:"category",data:"data_0"},{value:"Amazon",type:"string",field:"category",data:"data_0"},{value:"Facebook",type:"string",field:"category",data:"data_0"},{value:"Netflix",type:"string",field:"category",data:"data_0"},{value:"Microsoft",type:"string",field:"category",data:"data_0"},{value:"Samsung",type:"string",field:"category",data:"data_0"},{value:"Twitter",type:"string",field:"category",data:"data_0"},{value:"Linkedin",type:"string",field:"category",data:"data_0"}]},spec:y,liteSpec:O}},C=function(e,t){return{type:"UPDATE_DOC",docId:e,attrs:t}},w={testdoc:{id:"testdoc",title:"Testing...",timestamp:Date.now(),charts:["testchart"],chartsInEditor:[],searchedSentences:[],editorRawState:{blocks:[{key:"8i090",text:"Welcome to Vis-Text Editor",type:"unstyled",depth:0,inlineStyleRanges:[{offset:0,length:26,style:"BOLD"}],entityRanges:[],data:{}},{key:"42ncd",text:"Here you can compose interactive articles",type:"unstyled",depth:0,inlineStyleRanges:[{offset:0,length:42,style:"UNDERLINE"}],entityRanges:[],data:{}},{key:"327r6",text:"Start dragging the chart from Chart Gallery to the editor and start creating! ;)",type:"unstyled",depth:0,inlineStyleRanges:[{offset:0,length:81,style:"ITALIC"}],entityRanges:[],data:{}}],entityMap:{}}}},T=Object(u.a)((function(e){return{root:{flexGrow:1,marginBottom:e.spacing(3)},title:{flexGrow:1}}})),N=function(){var e=T(),t=Object(m.c)(),n=Object(m.d)((function(e){return e.ui.currentDocId})),a=Object(m.d)((function(e){return e.docs[n]}));return i.a.createElement(s.a,{className:e.root,position:"static",color:"inherit"},i.a.createElement(d.a,{variant:"dense"},i.a.createElement(f.a,{variant:"h6",className:e.title,underline:"none",color:"inherit",component:o.b,to:"/"},"KORI"),n&&i.a.createElement(h.a,{value:a.title,onChange:function(e){t(C(n,{title:e.target.value}))},size:"small",fullWidth:!0,margin:"dense",variant:"filled",style:{marginLeft:"100px",marginRight:"20px"},label:"Document Title"}),i.a.createElement(g.a,{color:"inherit",component:o.b,to:"/docs"},"Docs"),n&&i.a.createElement(r.Fragment,null,i.a.createElement("span",{style:{marginLeft:"10px",marginRight:"10px"}}," | "),i.a.createElement(g.a,{color:"inherit",component:o.b,to:"/docs/".concat(n)},"Edit"),i.a.createElement(g.a,{color:"inherit",component:o.b,to:"/docs/".concat(n,"/view")},"View"))))},L=n(1010),R=n(205),J=n(1026),K=n(475),D=n.n(K),V=n(1009),F=n(476),B=n.n(F),Q=n(477),q=n.n(Q),X=n(479),W=n.n(X),M=n(478),U=n.n(M),P=n(480),G=n.n(P);var H=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(R.a,{variant:"h2",gutterBottom:!0},"Kori: Interactive Synthesis of Text and Charts in Data Documents"),i.a.createElement(V.a,{container:!0,spacing:3,justify:"center"},i.a.createElement(V.a,{item:!0,xs:6},i.a.createElement(J.a,{marginBottom:2},i.a.createElement(R.a,{variant:"body1",gutterBottom:!0},"Charts go hand in hand with text to communicate complex data and are widely adopted in news articles, online blogs, and academic papers. They provide graphical summaries of the data, while text explains the message and context. However, synthesizing information across text and charts is difficult; it requires readers to frequently shift their attention. We investigated ways to support the tight coupling of text and charts in data documents. To understand their interplay, we analyzed the design space of chart-text references through news articles and scientific papers. Informed by the analysis, we developed a mixed-initiative interface enabling users to construct interactive references between text and charts. It leverages natural language processing to automatically suggest references as well as allows users to manually construct other references effortlessly. A user study complemented with algorithmic evaluation of the system suggests that the interface provides an effective way to compose interactive data documents.")),i.a.createElement(L.a,{variant:"extended",color:"primary","aria-label":"add",component:o.b,to:"/docs"},i.a.createElement(D.a,null),"Get Started")),i.a.createElement(V.a,{item:!0,xs:6},i.a.createElement(J.a,{p:2},i.a.createElement("video",{width:"100%",height:"auto",autoplay:!0,controls:!0},i.a.createElement("source",{src:"teaser.mp4",type:"video/mp4"}))))),i.a.createElement(J.a,{mt:3},i.a.createElement(R.a,{variant:"h6",gutterBottom:!0},"Publication Materials"),i.a.createElement(g.a,{href:"https://drive.google.com/uc?export=view&id=1t-EnacQODNS-CzRXPJbO5BCM4-wCZz5e",color:"primary",startIcon:i.a.createElement(B.a,null)},"Paper"),"  ",i.a.createElement(g.a,{href:"https://drive.google.com/uc?export=view&id=1XZJD622tyVFsDuM1IiRNeuqA1h76i9iO",color:"primary",startIcon:i.a.createElement(q.a,null)},"Data")," ",i.a.createElement(g.a,{href:"https://github.com/playfuldata/kori/tree/master",color:"primary",startIcon:i.a.createElement(U.a,null)},"Code")," ",i.a.createElement(g.a,{href:"https://youtu.be/WBiBj7bC2_g",color:"primary",startIcon:i.a.createElement(W.a,null)},"Presentation")," ",i.a.createElement(g.a,{href:"https://playfuldata.github.io/kori/",color:"primary",startIcon:i.a.createElement(G.a,null)},"Software")))},Y=n(931),Z=n(315),z=n.n(Z),_=function(e){return{type:"SET_SELECTED_LINK",link:e}},$=function(e){return{type:"SET_TEXT_SELECTION",textSelection:e}},ee=function(e){return{type:"SET_MANUAL_LINK_ID",linkId:e}},te=function(e){return{type:"EXIT_MANUAL_LINK_MODE",exit:e}},ne=function(e){return{type:"SET_VIEW_MODE",val:e}},ae=function(e){return{type:"LINK_ACTIVE_NO_AUTO_TRIGGER",val:e}},re=function(e){return{type:"SHOW_LINK_SETTING_FOR",val:e}},ie={},ce=Object(u.a)((function(e){return{button:{width:"100%",padding:e.spacing(1),margin:e.spacing(1)},paper:{display:"flex",justifyContent:"center",alignItems:"center",color:e.palette.text.secondary,height:e.spacing(16),width:"100%"}}}));var le=function(e){var t=ce(),n=Object(m.c)();return i.a.createElement(g.a,{className:t.button,component:o.b,to:"/docs/".concat(e.docId),onClick:function(){n({type:"SET_CURRENT_DOC_ID",docId:e.docId})}},i.a.createElement(Y.a,{className:t.paper,elevation:2},e.doc.title,i.a.createElement("div",null)))},oe=Object(u.a)((function(e){return{button:{width:"100%",padding:e.spacing(1),margin:e.spacing(1)},paper:{display:"flex",justifyContent:"center",alignItems:"center",color:e.palette.text.secondary,height:e.spacing(16),width:"100%"}}}));var ue=function(){var e=oe(),t=Object(m.c)(),n=Object(m.d)((function(e){return Object.values(e.docs)}));return i.a.createElement(V.a,{container:!0,spacing:1},i.a.createElement(V.a,{item:!0,xs:2},i.a.createElement(g.a,{className:e.button,onClick:function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=E();return{type:"CREATE_DOC",docId:t,attrs:e=Object(a.a)({title:"Untitled",editorRawState:null,timestamp:Date.now(),searchedSentences:[],charts:[],chartsInEditor:[]},e,{id:t})}}();t(e)}},i.a.createElement(Y.a,{className:e.paper,variant:"outlined"},i.a.createElement(z.a,null)))),n.map((function(e){return i.a.createElement(V.a,{key:e.id,item:!0,xs:2},i.a.createElement(le,{doc:e,docId:e.id}))})))},se=n(11),de=n(51),ge=n(22),fe=n(165),he=n.n(fe),me=n(481),pe=n.n(me),ve=n(320),be=n.n(ve),Ee=n(482),ye=n.n(Ee),Oe=n(483),Se=n.n(Oe),ke=n(484),je=n.n(ke),xe=(n(674),n(675),n(676),n(14)),Ie=n.n(xe),Ae=n(34),Ce=n(10),we=n(6),Te=n(0),Ne=n(251),Le=function(e,t,n){try{n&&function(e){var t=["geoshape"].includes(e.mark)||"arc"===e.mark.type?{paintbrush:{type:"multi",toggle:!0,clear:"window:keypress"}}:{brush:{type:"interval",clear:"window:keypress"},paintbrush:{type:"multi",toggle:!0,clear:"window:keypress"}};e.selection=t,e.encoding.opacity={condition:[{selection:"paintbrush",value:1}],value:.1}}(t)}catch(i){}var r=Object(Ne.compile)(t).spec;return r.data.forEach((function(e){e.url&&e.url.startsWith("data")&&(e.url="/kori/"+e.url)})),r.signals=[].concat(Object(we.a)(r.signals||[]),[{name:"highlight",value:{data:[],start:0,end:100,enabled:!1}}]),r.marks.forEach((function(t){!function e(t,n){if("group"===t.type)return void(t.marks&&t.marks.forEach((function(t){return e(t,n)})));var r="shape"===t.type&&t.style.includes("geoshape"),i="highlight.enabled===true && (\n        (length(highlight.rangeField) === 0 && ".concat(r?"indexof(highlight.data, datum.properties[highlight.field]) != -1 || indexof(highlight.data, datum[highlight.field]) != -1":"indexof(highlight.data, datum[highlight.field]) != -1",") || \n\n        length(highlight.rangeField) === 0 && length(highlight.field) === 2 && indexof(highlight.data, datum[highlight.field[0]]) != -1 && \n        indexof(highlight.data, datum[highlight.field[1]]) || \n\n        (length(highlight.rangeField) === 1 && ").concat(r?"indexof(highlight.data, datum.properties[highlight.field]) != -1 || indexof(highlight.data, datum[highlight.field]) != -1":"indexof(highlight.data, datum[highlight.field]) != -1",") && inrange(datum[highlight.rangeField[0]], [highlight.range[0], highlight.range[1]]) || \n\n        length(highlight.rangeField) === 1 && length(highlight.data) === 0 && inrange(datum[highlight.rangeField[0]], [highlight.range[0], highlight.range[1]]) ||\n\n        length(highlight.rangeField) === 2 && length(highlight.data) === 0 && inrange(datum[highlight.rangeField[0]], [highlight.range[0], highlight.range[1]]) && \n        inrange(datum[highlight.rangeField[1]], [highlight.range[2], highlight.range[3]]) ||\n\n        (length(highlight.rangeField) === 2 && ").concat(r?"indexof(highlight.data, datum.properties[highlight.field]) != -1 || indexof(highlight.data, datum[highlight.field]) != -1":"indexof(highlight.data, datum[highlight.field]) != -1",") && inrange(datum[highlight.rangeField[0]], [highlight.range[0], highlight.range[1]]) && inrange(datum[highlight.rangeField[1]], [highlight.range[2], highlight.range[3]]) ||\n\n        length(highlight.rangeField) === 3 && length(highlight.data) === 0 && inrange(datum[highlight.rangeField[0]], [highlight.range[0], highlight.range[1]]) && \n        inrange(datum[highlight.rangeField[1]], [highlight.range[2], highlight.range[3]]) && inrange(datum[highlight.rangeField[2]], [highlight.range[4], highlight.range[5]]) ||\n\n        (length(highlight.rangeField) === 3 && ").concat(r?"indexof(highlight.data, datum.properties[highlight.field]) != -1 || indexof(highlight.data, datum[highlight.field]) != -1":"indexof(highlight.data, datum[highlight.field]) != -1",") && inrange(datum[highlight.rangeField[0]], [highlight.range[0], highlight.range[1]]) && inrange(datum[highlight.rangeField[1]], [highlight.range[2], highlight.range[3]]) &&\n        inrange(datum[highlight.rangeField[2]], [highlight.range[4], highlight.range[5]])\n\n\n    )"),c="highlight.enabled===true && !(\n        (length(highlight.rangeField) === 0 && ".concat(r?"indexof(highlight.data, datum.properties[highlight.field]) != -1":"indexof(highlight.data, datum[highlight.field]) != -1",")\n    )"),l=t.encode.update[n.channel],o=[{test:i,value:n.active},{test:c,value:n.inactive}];t.encode.update=Object(a.a)({},t.encode.update,Object(p.a)({},n.channel,o.concat(Object(Te.isArray)(l)?l:[])))}(t,e)})),r};var Re=n(257),Je=function(e){var t,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,r=function(){for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];var l=Date.now();t&&l<t+a?(clearTimeout(n),n=setTimeout((function(){t=l,e.apply(void 0,i)}),a)):(t=l,e.apply(void 0,i))};return r},Ke=n(106),De=n(107),Ve=n(173),Fe=n.n(Ve),Be=n(1016),Qe=n(1033),qe=n(956);function Xe(e){var t=Object(m.c)(),n={opacity:{active:1,inactive:.1},fill:{active:"#1f77b4",inactive:"#c7c7c7"}},c=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],l=e.chart.highlight,o=Object(r.useState)(l.active),u=Object(se.a)(o,2),s=u[0],d=u[1],g=Object(r.useState)(l.inactive),f=Object(se.a)(g,2),h=f[0],p=f[1];function v(n,r){d(r),t(j(e.chart.id,{highlight:Object(a.a)({},l,{active:r})}))}function b(n,r){p(r),t(j(e.chart.id,{highlight:Object(a.a)({},l,{inactive:r})}))}return i.a.createElement("div",null,i.a.createElement(J.a,{zIndex:"modal",className:Fe.a.panel,top:40,left:"45%",onMouseDown:function(e){return e.stopPropagation()}},i.a.createElement(J.a,{component:Y.a,p:2},i.a.createElement(V.a,{container:!0,direction:"column",spacing:2},i.a.createElement(V.a,{item:!0},i.a.createElement(R.a,{gutterBottom:!0},"Highlight Option")),i.a.createElement(V.a,{item:!0},i.a.createElement(R.a,{variant:"caption"},"Channel"),i.a.createElement(J.a,null,i.a.createElement(qe.a,{value:l.channel,onChange:function(r){var i=r.target.value;if(i!==l.channel){var c=n[i];d(c.active),p(c.inactive),t(j(e.chart.id,{highlight:Object(a.a)({channel:i},n[i])}))}}},Object.keys(n).map((function(e){return i.a.createElement(Be.a,{key:e,value:e},e)}))))),i.a.createElement(V.a,{item:!0},i.a.createElement(R.a,{variant:"caption"},"Active"),"opacity"===l.channel?i.a.createElement(Qe.a,{value:s,"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",min:0,max:1,step:.05,onChange:function(e,t){d(t)},onChangeCommitted:v}):i.a.createElement(J.a,{className:Fe.a.picker},c.map((function(e){return i.a.createElement(J.a,{className:Fe.a.color,bgcolor:e,border:e===s?1:0,onMouseUp:function(t){return v(0,e)}})}))),i.a.createElement(R.a,{variant:"caption"},"Inactive"),"opacity"===l.channel?i.a.createElement(Qe.a,{value:h,"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",min:0,max:1,step:.05,onChange:function(e,t){p(t)},onChangeCommitted:b}):i.a.createElement(J.a,{className:Fe.a.picker},c.map((function(e){return i.a.createElement(J.a,{className:Fe.a.color,bgcolor:e,border:e===h?1:0,onMouseUp:function(t){return b(0,e)}})}))))))))}var We=n(1017),Me=n(255),Ue=n.n(Me),Pe=Object(r.memo)((function(e){var t=e.block,n=e.blockProps,c=(e.customStyleMap,e.customStyleFn,e.decorator,e.forceSelection,e.offsetKey,e.selection),l=(e.tree,e.contentState,e.blockStyleFn,e.preventScroll,e.style),o=Object(Ce.a)(e,["block","blockProps","customStyleMap","customStyleFn","decorator","forceSelection","offsetKey","selection","tree","contentState","blockStyleFn","preventScroll","style"]),u=Object(r.useState)(null),s=Object(se.a)(u,2),d=s[0],g=s[1],f=Object(r.useRef)(null),h=Object(r.useRef)(null),p=Object(r.useState)(1),v=Object(se.a)(p,2),b=v[0],E=v[1],y=Object(m.d)((function(e){return e.charts[n.id]})),O=Object(r.useState)(!1),S=Object(se.a)(O,2),k=S[0],j=S[1],x=Object(m.d)((function(e){return e.ui.viewMode})),I=Object(m.d)((function(e){return Object.values(e.links).filter((function(e){return e.chartId===n.id}))}),m.b),A=Object(r.useMemo)((function(){return Le(y.highlight,JSON.parse(JSON.stringify(y.liteSpec)),!1)}),[y.spec,y.highlight]);function C(e,t){if(e)f.current.getBoundingClientRect().width}Object(r.useEffect)((function(){(function(){var e=Object(Ae.a)(Ie.a.mark((function e(){var t,n,a,r,i,c;return Ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(Ke.a)(A),e.next=3,new De.a(t).runAsync();case 3:return n=e.sent,e.next=6,n.toCanvas();case 6:return a=e.sent,r=a.height/a.width,E(r),e.next=11,Object(Re.a)(h.current,A,{actions:!1});case 11:i=e.sent,c=i.view,g(c);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[A]),Object(r.useEffect)(Je(Object(Ae.a)(Ie.a.mark((function e(){return Ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C(d,b);case 1:case"end":return e.stop()}}),e)}))),500)),Object(r.useEffect)((function(){d&&(I.some((function(e){return e.active}))?I.filter((function(e){return e.active})).forEach((function(e){var t;d.signal("highlight",{type:e.type,data:e.data||[],field:(null===(t=e.feature)||void 0===t?void 0:t.field)||"",enabled:!0,rangeField:e.rangeField||[],range:e.range||[]}).runAsync()})):d.signal("highlight",{enabled:!1}).runAsync())}),[I]);var w=!x&&c.getAnchorKey()===t.getKey();return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",Object.assign({ref:f},o,{style:Object(a.a)({},l,{position:"relative",width:"fit-content"})}),i.a.createElement("div",null,w&&i.a.createElement(We.a,{onMouseDown:function(){j(!k)},"aria-label":"settings"},i.a.createElement(Ue.a,null))),i.a.createElement("div",{ref:h}),w&&k&&i.a.createElement(Xe,{chart:y})))})),Ge=n(74),He=be()(),Ye=Se()(),Ze=ye()(),ze=je()(),_e=Ze.AlignmentTool,$e=He.Toolbar,et=[Ye,ze,Ze,He,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.decorator?e.decorator(Pe):Pe;return{blockRendererFn:function(e,n){var r=n.getEditorState;if("atomic"===e.getType()){var i=r().getCurrentContent();if(!e.getEntityAt(0))return;var c=i.getEntity(e.getEntityAt(0)),l=c.getData();if("CHART"===c.getType())return{component:t,editable:!1,props:Object(a.a)({},l)}}return null},ChartBlock:Pe}}({decorator:Object(fe.composeDecorators)(Ye.decorator,ze.decorator,Ze.decorator)})];function tt(){return i.a.createElement(r.Fragment,null,i.a.createElement($e,null,(function(e){return i.a.createElement("div",null,i.a.createElement(Ge.BoldButton,e),i.a.createElement(Ge.ItalicButton,e),i.a.createElement(Ge.UnderlineButton,e),i.a.createElement(Ge.CodeButton,e),i.a.createElement(ve.Separator,e),i.a.createElement(Ge.HeadlineOneButton,e),i.a.createElement(Ge.HeadlineTwoButton,e),i.a.createElement(Ge.HeadlineThreeButton,e),i.a.createElement(Ge.UnorderedListButton,e),i.a.createElement(Ge.OrderedListButton,e),i.a.createElement(Ge.BlockquoteButton,e),i.a.createElement(Ge.CodeBlockButton,e))})),i.a.createElement(_e,null))}var nt=n(329),at=n.n(nt),rt=function(e,t){return{type:"CREATE_LINKS",links:t.map((function(t){return Object(a.a)({},t,{timestamp:Date.now(),docId:e,id:E("link-")})}))}},it=function(e){return{type:"DELETE_LINK",linkId:e}},ct=function(e){return{type:"DEACTIVATE_LINK",linkId:e}},lt=Object(S.a)((function(e){return e.links}),(function(e,t){return t}),(function(e,t){return Object.fromEntries(Object.entries(e).filter((function(e){var n=Object(se.a)(e,2);n[0];return n[1].docId===t})))}));var ot=n(489),ut=n.n(ot);var st=[{strategy:function(e,t,n){e.findEntityRanges((function(e){var t=e.getEntity();return null!==t&&"TEXT_SELECTION"===n.getEntity(t).getType()}),t)},component:function(e){return i.a.createElement("span",{className:ut.a.textSelection,"data-offset-key":e.offsetKey},e.children)}},{strategy:function(e,t,n){e.findEntityRanges((function(e){var t=e.getEntity();return null!==t&&"LINK"===n.getEntity(t).getType()}),t)},component:function(e){var t=Object(m.c)(),n=Object(m.d)((function(e){return e.links})),a=at.a.potentialLink,r=e.contentState.getEntity(e.entityKey).getData();return n[r.id]&&n[r.id].isConfirmed&&(a=at.a.link),i.a.createElement("span",{className:a,onMouseOver:function(){t({type:"ACTIVATE_LINK",linkId:r.id}),t(ae(!0))},onMouseLeave:function(){ct(r.id),t(ct(r.id)),t(ae(!1))},onClick:function(){var n=JSON.parse(JSON.stringify(r));n.startIndex=e.start,n.endIndex=e.end,t(_(n))},"data-offset-key":e.offsetKey},e.children)}}];function dt(e){Object(m.c)();var t=Object(de.f)().docId,n=(Object(m.d)((function(e){return e.docs[t]})),Object(m.d)((function(e){return e.docs[t].editorRawState}))),c=Object(r.useRef)(null),l=null===n?ge.EditorState.createEmpty().getCurrentContent():Object(ge.convertFromRaw)(function(e){var t=Object(a.a)({},e.entityMap);return Object.keys(t).forEach((function(e){"LINK"===t[e].type&&(t[e].data.isConfirmed||delete t[e])})),{blocks:e.blocks,entityMap:t}}(n)),o=Object(r.useState)(ge.EditorState.createWithContent(l)),u=Object(se.a)(o,2),s=u[0],d=u[1],g=e.viewMode;return i.a.createElement(r.Fragment,null,i.a.createElement("div",{className:pe.a.viewer},i.a.createElement(he.a,{editorState:s,plugins:et,onChange:function(e){d(e)},handleKeyCommand:function(e){var t=ge.RichUtils.handleKeyCommand(s,e);return t?(d(t),"handled"):"not-handled"},decorators:st,ref:c,readOnly:g})))}function gt(e){console.log("Viewer Mode Active!!!");var t=Object(m.c)();return Object(r.useEffect)((function(){t(ne(!0))}),[]),i.a.createElement(V.a,{container:!0,spacing:2},i.a.createElement(V.a,{item:!0,xs:8},i.a.createElement(dt,{viewMode:!0})))}var ft=n(330),ht=n.n(ft),mt=n(490),pt=n.n(mt),vt=n(1029),bt=n(1028);function Et(e){return i.a.createElement(bt.a,Object.assign({elevation:6,variant:"filled"},e))}var yt=n(1031);var Ot=Object(r.memo)((function(e){var t=Object(m.c)(),n=Object(m.d)((function(t){return t.docs[e.docId].chartsInEditor})),a=Object(r.useState)(null),c=Object(se.a)(a,2),l=c[0],o=c[1],u=Object(r.useState)(!1),s=Object(se.a)(u,2),d=s[0],g=s[1];return i.a.createElement(Y.a,{className:pt.a.container,onKeyDown:function(a){var r,i;"Delete"===a.key&&(n.includes(e.id)?o("Chart can not be deleted. It is active in the editor!"):t((r=e.id,i={docId:e.docId},{type:"DELETE_CHART",chartId:r,attrs:i})))},tabIndex:"0",elevation:d?2:0},i.a.createElement("div",{draggable:!0,onDragStart:function(t){t.dataTransfer.setData("chartId",e.id)},onMouseEnter:function(){g(!0)},onMouseLeave:function(){g(!1)}},i.a.createElement(yt.a,{src:e.thumbnail,variant:"rounded",style:{height:"150px",width:"150px"}})),i.a.createElement(vt.a,{open:null!==l,anchorOrigin:{vertical:"bottom",horizontal:"left"},autoHideDuration:5e3,onClose:function(){o(null)}},i.a.createElement(Et,{severity:"error"},l)))})),St=function(e){return kt.apply(this,arguments)};function kt(){return(kt=Object(Ae.a)(Ie.a.mark((function e(t){var n,a,r,i,c,l,o,u,s,d,g,f,h,m,p,v,b,E,y,O,S,k,j,x,I,A,C,w,T;return Ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.data){e.next=2;break}return e.abrupt("return",[]);case 2:return n={},a=Object(Ke.a)(t),e.next=6,new De.a(a).runAsync();case 6:r=e.sent,i=r.getState({data:Te.truthy,signals:Te.falsy,recurse:!0}),c=!0,l=!1,o=void 0,e.prev=11,u=t.marks[Symbol.iterator]();case 13:if(c=(s=u.next()).done){e.next=73;break}d=s.value,g=i.data[d.name].map((function(e){return e.datum})),f=!0,h=!1,m=void 0,e.prev=19,p=g[Symbol.iterator]();case 21:if(f=(v=p.next()).done){e.next=56;break}b=v.value,E="shape"===d.type&&d.style.includes("geoshape"),y=Object.entries(b),E&&(y=y.concat(Object.entries(b.properties))),O=!0,S=!1,k=void 0,e.prev=29,j=y[Symbol.iterator]();case 31:if(O=(x=j.next()).done){e.next=39;break}if(I=Object(se.a)(x.value,2),A=I[0],C=I[1],Object(Te.isString)(C)){e.next=35;break}return e.abrupt("continue",36);case 35:n[C]={value:C,type:"string",field:A,data:b.name};case 36:O=!0,e.next=31;break;case 39:e.next=45;break;case 41:e.prev=41,e.t0=e.catch(29),S=!0,k=e.t0;case 45:e.prev=45,e.prev=46,O||null==j.return||j.return();case 48:if(e.prev=48,!S){e.next=51;break}throw k;case 51:return e.finish(48);case 52:return e.finish(45);case 53:f=!0,e.next=21;break;case 56:e.next=62;break;case 58:e.prev=58,e.t1=e.catch(19),h=!0,m=e.t1;case 62:e.prev=62,e.prev=63,f||null==p.return||p.return();case 65:if(e.prev=65,!h){e.next=68;break}throw m;case 68:return e.finish(65);case 69:return e.finish(62);case 70:c=!0,e.next=13;break;case 73:e.next=79;break;case 75:e.prev=75,e.t2=e.catch(11),l=!0,o=e.t2;case 79:e.prev=79,e.prev=80,c||null==u.return||u.return();case 82:if(e.prev=82,!l){e.next=85;break}throw o;case 85:return e.finish(82);case 86:return e.finish(79);case 87:return t.data.forEach((function(e){r.data(e.name)})),w=xt(t),t.scales.filter((function(e){return["ordinal","band","point"].includes(e.type)})).forEach((function(e){t.data.forEach((function(t){r.data(t.name).forEach((function(a){if(e.domain.field){var r=e.domain.field,i=Object(Te.isDate)(a[r])?a[r]:Object(Te.toString)(a[r]),c=Object(Te.isDate)(i)?"date":"string";n[i]={value:i,type:c,field:r,data:t.name}}else e.domain.fields&&e.domain.fields.forEach((function(e){var r=Object(Te.isString)(e)?e:e.field,i=Object(Te.isDate)(a[r])?a[r]:Object(Te.toString)(a[r]),c=Object(Te.isDate)(i)?"date":"string";n[i]={value:i,type:c,field:r,data:t.name}}))}))})),Object(Te.isArray)(e.domain)&&e.domain.forEach((function(a){a=Object(Te.isDate)(a)?a:Object(Te.toString)(a);var r=Object(Te.isDate)(a)?"date":"string",i=jt(t,e.name);n[a]={value:a,type:r,field:i,data:null}}))})),T={axes:Object.values(w),features:Object.values(n)},e.abrupt("return",T);case 92:case"end":return e.stop()}}),e,null,[[11,75,79,87],[19,58,62,70],[29,41,45,53],[46,,48,52],[63,,65,69],[80,,82,86]])})))).apply(this,arguments)}var jt=function(e,t){var n=!0,a=!1,r=void 0;try{for(var i,c=e.marks[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var l=i.value;if(l.encode.enter)for(var o=0,u=Object.entries(l.encode.enter);o<u.length;o++){var s=Object(se.a)(u[o],2)[1];if(s.scale===t&&s.field)return s.field}if(l.encode.update)for(var d=0,g=Object.entries(l.encode.update);d<g.length;d++){var f=Object(se.a)(g[d],2)[1];if(f.scale===t&&f.field)return f.field}}}catch(h){a=!0,r=h}finally{try{n||null==c.return||c.return()}finally{if(a)throw r}}return null},xt=function(e){var t={};return e.scales.forEach((function(n){var a=n.name,r=Object(Te.isArray)(n.domain.fields)&&n.domain.fields[0].hasOwnProperty("field")?n.domain.fields[0].field:Object(Te.isArray)(n.domain.fields)?n.domain.fields:n.domain.field,i=n.domain.data,c=n.type,l=e.axes?e.axes.filter((function(e){return e.scale===a&&void 0!==e.title||null})):void 0,o=Object(Te.isArray)(l)&&l.length>0&&l[0].hasOwnProperty("title")?l[0].title:r||void 0,u={name:a,field:r,data:i,type:c,title:o};t[a]=u})),t},It=function(){var e=Object(Ae.a)(Ie.a.mark((function e(t){var n,a,r,i;return Ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(Ke.a)(t),e.next=3,new De.a(n).runAsync();case 3:return a=e.sent,e.next=6,a.toImageURL("png");case 6:return r=e.sent,e.next=9,At(r);case 9:return i=e.sent,e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function At(e){return new Promise((function(t,n){var a=new Image;a.src=e,a.onload=function(){var e=250/a.height*a.width,n=document.createElement("canvas"),r=n.getContext("2d");n.width=e,n.height=250,r.drawImage(this,0,0,e,250),t(n.toDataURL())}}))}function Ct(e){var t=Object(m.c)(),n=Object(de.f)().docId,a=Object(r.useState)(!1),c=Object(se.a)(a,2),l=c[0],o=c[1],u=Object(r.useState)(null),s=Object(se.a)(u,2),d=s[0],g=s[1],f=Object(m.d)((function(e){return x(e,n)}));return i.a.createElement("div",{className:ht.a.container,onDragEnter:function(){o(!0)},onDragLeave:function(){o(!1)},onDragOver:function(e){e.preventDefault(),e.stopPropagation()},onDrop:function(e){e.preventDefault(),e.stopPropagation();var a=e.dataTransfer.files[0];if(a){if(a.type.match("application/json")){var r=new FileReader;r.onload=function(){var e=Object(Ae.a)(Ie.a.mark((function e(a){var r,i,c,l;return Ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=JSON.parse(a.target.result),(i=Object(Ne.compile)(r).spec).data.forEach((function(e){e.url&&e.url.startsWith("data")&&(e.url="/kori/"+e.url)})),e.next=6,It(i);case 6:return c=e.sent,e.next=9,St(i);case 9:l=e.sent,t(k(n,i,r,{properties:l,thumbnail:c})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),g("Syntex error in specification file!");case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),r.readAsText(a)}else g("Wrong format!");o(!1)}}},i.a.createElement(vt.a,{open:null!==d,anchorOrigin:{vertical:"bottom",horizontal:"left"},autoHideDuration:5e3,onClose:function(){g(null)}},i.a.createElement(Et,{severity:"error"},d)),i.a.createElement("div",{className:ht.a.draggingArea,style:{opacity:l?.5:0}},"Drop Vega-lite Spec"),f.map((function(e){return i.a.createElement(Ot,{key:e.id,docId:n,id:e.id,spec:e.spec,thumbnail:e.thumbnail})})))}var wt=n(491),Tt=n.n(wt),Nt=n(492),Lt=n.n(Nt),Rt=n(1008),Jt=n(953),Kt=n(1020),Dt=n(1019),Vt=n(1018),Ft=n(316),Bt=n.n(Ft);function Qt(e){var t=Object(m.c)(),n=window.getSelection(),a=n.rangeCount>0?n.getRangeAt(0).getBoundingClientRect():null;function r(t,n){n.preventDefault(),n.stopPropagation(),e.onSelected(t)}return a?i.a.createElement(J.a,{zIndex:"modal",left:a.x+20,top:a.y+20,className:Lt.a.suggestionPanel},i.a.createElement(Y.a,null,i.a.createElement(Rt.a,null,i.a.createElement(Jt.a,{button:!0,onMouseDown:function(){e.onCreateLinkSelect(),t($(e.textSelection))}},i.a.createElement(Vt.a,null,i.a.createElement(Bt.a,null)),"Create Link"),e.suggestions.slice(0,5).map((function(e,t){return i.a.createElement(Jt.a,{key:t,button:!0,dense:!0,onMouseDown:r.bind(null,e)},i.a.createElement(Dt.a,null,i.a.createElement(yt.a,{alt:"chart",src:e.thumbnail})),i.a.createElement(Kt.a,{primary:e.text,secondary:i.a.createElement(R.a,{component:"span",variant:"caption",color:"textSecondary"},e.chartId)}))}))))):""}var qt=n(493),Xt=n.n(qt),Wt=n(1021);function Mt(e){var t=Object(m.c)(),n=window.getSelection(),a=n.rangeCount>0?n.getRangeAt(0).getBoundingClientRect():null;return a&&e.selectedLink&&!e.selectedLink.isConfirmed&&!e.textSelection?i.a.createElement(J.a,{zIndex:"modal",left:a.x+10,top:a.y+10,className:Xt.a.potentialLinkControls},i.a.createElement(Y.a,{elevation:1},i.a.createElement(Wt.a,{size:"small",variant:"text",fullWidth:!0,"aria-label":"small button group"},i.a.createElement(g.a,{onMouseDown:function(n){n.preventDefault(),n.stopPropagation(),t({type:"CONFIRM_LINK",linkId:e.selectedLink.id}),e.onAccept(e.selectedLink),t(_(null))}},"Accept"),i.a.createElement(g.a,{onMouseDown:function(n){n.preventDefault(),n.stopPropagation(),e.onDiscard(e.selectedLink),t(_(null))}},"Discard")))):""}var Ut=function(e,t,n){var a;return 0===t.length?[]:(a=[]).concat.apply(a,Object(we.a)(e.map((function(e){return e.properties.features.filter((function(e){return"string"===e.type&&e.value?e.value.toLowerCase().startsWith(t.toLowerCase()):"date"===e.type&&e.value.toString().toLowerCase().includes(t.toLowerCase())})).map((function(t){return{chartId:e.id,thumbnail:e.thumbnail,feature:t,text:t.value.toString(),startIndex:n}}))}))))},Pt=n(47),Gt=n.n(Pt),Ht=n(723),Yt=function(){var e=Object(Ae.a)(Ie.a.mark((function e(t,n,a,r){var i,c,l,o;return Ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={uri:"https://koriserver.namwkim.org/discover-links",method:"POST",headers:{Accept:"application/json","Accept-Charset":"utf-8"},json:!0,body:{text:t,sentenceOffset:n,charts:a,blockKey:r}},c=Gt.a.promisify(Ht),e.prev=3,e.next=6,c(i);case 6:return o=e.sent,e.abrupt("return",null===o||void 0===o?void 0:null===(l=o.body)||void 0===l?void 0:l.data);case 10:return e.prev=10,e.t0=e.catch(3),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t,n,a,r){return e.apply(this,arguments)}}(),Zt=function(e){var t=e.getCurrentContent(),n=e.getSelection().getAnchorKey();return{blockText:t.getBlockForKey(n).getText(),blockKey:n}},zt=function(e){var t=e.getCurrentContent(),n=e.getSelection(),a=n.getAnchorKey(),r=t.getBlockForKey(a),i=n.getAnchorOffset(),c=r.getText().substr(0,i),l=n.getAnchorOffset(),o=c.split(" ").slice(-1).pop();return{text:o,startIndex:l-o.length,endIndex:l}},_t=function(e,t){var n,a=null===(n=Zt(t))||void 0===n?void 0:n.blockText;return e.forEach((function(e){t=$t(e,t,a)})),t},$t=function(e,t,n){var r=t.getCurrentContent(),i=t.getSelection(),c=i.getAnchorKey(),l=e.startIndex,o=e.endIndex;l<0&&(l=0);for(var u=e.text,s=[],d=0;~(d=n.indexOf(u,d+u.length));)s.push(d);if(s.length>0&&!s.includes(e.startIndex))return t;var g=r.createEntity("LINK","MUTABLE",Object(a.a)({},e)),f=g.getLastCreatedEntityKey(),h=i.merge({anchorKey:e.blockKey,focusKey:e.blockKey,anchorOffset:l,focusOffset:o}),m=t.getSelection().merge({anchorOffset:zt(t).startIndex});g=ge.Modifier.replaceText(t.getCurrentContent(),"@"===(null===e||void 0===e?void 0:e.trigger)?m:h,e.text,t.getCurrentInlineStyle(),f);var p=i.getAnchorOffset(),v=ge.EditorState.push(t,g,"insert-characters"),b=v.getSelection().merge({anchorKey:c,focusKey:c,focusOffset:p,anchorOffset:p});return v=ge.EditorState.forceSelection(v,b)},en=function(e,t){if(e){var n=t.getCurrentContent(),a=ge.Modifier.applyEntity(n,e,null),r=ge.EditorState.push(t,a,"apply-entity"),i=Math.max(e.getAnchorOffset(),e.getFocusOffset()),c=r.getSelection().merge({focusOffset:i,anchorOffset:i});return r=ge.EditorState.moveSelectionToEnd(r),r=ge.EditorState.forceSelection(r,c)}},tn=function(e,t,n){var r=Object(a.a)({},e.entityMap);return t=t.filter((function(e){var t=!0;return Object.keys(r).forEach((function(a){"LINK"===r[a].type&&r[a].data.isConfirmed&&r[a].data.text===(null===e||void 0===e?void 0:e.text)&&n.includes(r[a].data.text)&&(t=!1)})),t}))},nn=n(494),an=function(e,t,n,a){var r=e.text,i=e.extent,c=e.blockKey,l=e.chartId,o=t.feature,u=t.values,s=n.rangeField,d=n.range;return{text:r,startIndex:i[0],endIndex:i[1],blockKey:c,chartId:l,feature:o||"",data:u||[],rangeField:s||[],range:d||[],active:!1,isConfirmed:!0,trigger:a}};function rn(e){var t=Object(m.c)(),n=Object(de.f)().docId,c=Object(m.d)((function(e){return e.docs[n]})),l=Object(m.d)((function(e){return x(e,n)})),o=Object(m.d)((function(e){return e.docs[n].editorRawState})),u=Object(m.d)((function(e){return I(e,n)})),s=Object(m.d)((function(e){return e.ui.selectedLink})),d=Object(m.d)((function(e){return lt(e,n)})),g=Object(m.d)((function(e){return e.ui.exitManualLink})),f=Object(m.d)((function(e){return e.ui.manualLinkId})),h=Object(m.d)((function(e){return e.ui.linkActiveNoAutoTrigger})),v=Object(m.d)((function(e){return e.ui.textSelection})),b=Object(r.useState)(v),y=Object(se.a)(b,2),O=y[0],S=y[1],k=Object(r.useRef)(null),j=Object(r.useState)([]),A=Object(se.a)(j,2),w=A[0],T=A[1],N=Object(m.d)((function(e){return e.docs[n].searchedSentences})),L=null===o?ge.EditorState.createEmpty().getCurrentContent():Object(ge.convertFromRaw)(o),R=Object(r.useState)(ge.EditorState.createWithContent(L)),J=Object(se.a)(R,2),K=J[0],D=J[1],V=Object(r.useState)(null),F=Object(se.a)(V,2),B=F[0],Q=F[1],q=Object(r.useState)(null),X=Object(se.a)(q,2),W=X[0],M=X[1],U=Object(r.useState)(null),P=Object(se.a)(U,2),G=P[0],H=P[1],Y=Object(r.useState)([]),Z=Object(se.a)(Y,2),z=Z[0],ne=Z[1];Object(r.useRef)();function ae(e){var t=Object(ge.convertToRaw)(e.getCurrentContent()),n=e.getSelection(),a=n.getAnchorKey(),r=t.blocks.find((function(e){return e.key===a})),i=n.getAnchorOffset();return r.entityRanges.find((function(e){return i>=e.offset&&i<=e.offset+e.length}))}return Object(r.useEffect)((function(){t(te(!1)),Q(null),t($(null)),t(ee(null))}),[]),Object(r.useEffect)((function(){g&&(D(en(B,K)),k.current.focus(),t(te(!1)),Q(null),window.dispatchEvent(new KeyboardEvent("keypress",{key:"a"})))}),[g]),Object(r.useEffect)((function(){g&&void 0===d[f]&&(D(en(B,K)),Q(null)),d[f]&&(D(_t([d[f]],K)),t(ee(null)),Q(null),H({msg:"Link successfully created!",severity:"success"}),window.dispatchEvent(new KeyboardEvent("keypress",{key:"a"})))}),[f,g]),Object(r.useEffect)((function(){var e=Object(ge.convertToRaw)(K.getCurrentContent());t(C(c.id,{editorRawState:e}))}),[K]),Object(r.useEffect)((function(){var e=Object(ge.convertToRaw)(K.getCurrentContent()).entityMap,n=[];Object.keys(e).forEach((function(t){"LINK"===e[t].type&&d[e[t].data.id]&&n.push(e[t].data.id)})),Object.keys(d).forEach((function(e){n.includes(e)||t(it(e))}))}),[Object.keys(Object(ge.convertToRaw)(K.getCurrentContent()).entityMap).length]),Object(r.useEffect)((function(){(function(){var e=Object(Ae.a)(Ie.a.mark((function e(){var n,a,r,i,l,o,d,g,f,m;return Ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===W){e.next=34;break}if(n=W.blockText,!h){e.next=4;break}return e.abrupt("return");case 4:if(!s){e.next=6;break}return e.abrupt("return");case 6:if(!O&&"INVALID"!=O){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,Object(nn.a)(n).sentences().json();case 10:a=e.sent,r=[],i=[],l=0;case 14:if(!(l<a.length)){e.next=31;break}if((o=a[l].text).includes(".")){e.next=18;break}return e.abrupt("continue",28);case 18:if(!(null===N||void 0===N?void 0:N.includes(o))){e.next=20;break}return e.abrupt("continue",28);case 20:if(i.push(o),d={text:o,startIndex:n.indexOf(o),endIndex:n.indexOf(o)+o.length},0!==u.length){e.next=24;break}return e.abrupt("return");case 24:return e.next=26,Yt(d.text,d.startIndex,u,W.blockKey);case 26:g=e.sent,r=r.concat(g);case 28:l++,e.next=14;break;case 31:t(C(c.id,{searchedSentences:null===N||void 0===N?void 0:N.concat(i)})),r.length>0&&(f=Object(ge.convertToRaw)(K.getCurrentContent()),(r=tn(f,r,n)).length>0&&(m=new Set,r=r.filter((function(e){var t=m.has(e.startIndex);return m.add(e.startIndex),!t})),ne(r))),M(null);case 34:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[W]),i.a.createElement(r.Fragment,null,i.a.createElement(tt,null),i.a.createElement("div",{className:Tt.a.editor,onDragOver:function(e){e.preventDefault(),e.stopPropagation(),k.current.focus()},onDrop:function(e){e.preventDefault(),e.stopPropagation();var t=e.dataTransfer.getData("chartId"),n=l.find((function(e){return e.id===t})),a=u.find((function(e){return e.id===t}));n&&!a&&(!function(e){var t=K.getCurrentContent(),n=(t=t.createEntity("CHART","IMMUTABLE",{id:e.id})).getLastCreatedEntityKey(),a=ge.AtomicBlockUtils.insertAtomicBlock(K,n," ");D(a)}(n),e.dataTransfer.clearData())}},i.a.createElement(he.a,Object(p.a)({editorState:K,plugins:et,onChange:function(e){if(D(e),z.length>0){var n=rt(c.id,z);D(_t(n.links,e)),t(n),H({msg:"Found some suggestions!",severity:"success"}),ne([])}var a=Object(ge.convertToRaw)(e.getCurrentContent()),r=zt(e),i=e.getCurrentContent().getPlainText(" ").trim(),l=null===N||void 0===N?void 0:N.filter((function(e){return i.includes(e)}));if(t(C(c.id,{searchedSentences:l})),(null===r||void 0===r?void 0:r.text.includes("."))&&M(Zt(e)),r.text.startsWith("@")){var o=Ut(u,r.text.slice(1),r.startIndex);T(o)}else T([]);var d=a.entityMap;if(Object.keys(d).length!==u.length){var f=Object.values(d).reduce((function(e,t){return"CHART"===t.type&&e.push(t.data.id),e}),[]);t(function(e,t){return{type:"UPDATE_CHARTS_IN_EDITOR",docId:e,charts:t}}(c.id,f))}var h=e.getSelection(),m=h.getAnchorOffset(),p=h.getAnchorKey();s&&p&&(p!==s.blockKey||m<s.startIndex||m>s.endIndex)&&t(_(null));var v=function(e,t,n){n=n||"\n";var a=t.getStartKey(),r=t.getEndKey(),i=e.getBlockMap(),c="",l=!1,o=i.skipUntil((function(e){return e.getKey()===a})).takeUntil((function(e){var t=l;return e.getKey()===r&&(l=!0),t}));if(o.length>1)return"INVALID";var u=o.map((function(e){var n=e.getKey(),i=e.getText(),l=0,o=i.length;return n===a&&(l=t.getStartOffset()),n===r&&(o=t.getEndOffset()),i=i.slice(l,o),c=n,i})).join(n),s=t.getStartOffset(),d=t.getEndOffset();return t.isBackward&&(d=t.getEndOffset(),s=t.getStartOffset()),t.getStartOffset()!==t.getEndOffset()?{text:u,startIndex:s,endIndex:d,blockKey:c,isBackward:t.isBackward}:null}(e.getCurrentContent(),h," ");if(S(v),v&&"INVALID"!=v){var b=Ut(u,v.text.trim(),v.startIndex);0!==b.length?T(b):T([{text:"NoLinkFound!"}])}"unstyled"!==e.getCurrentContent().getBlockForKey(p).getType()||g||!B||O||(t(te(!0)),t($(null)))},onBlur:function(){T([])},handleKeyCommand:function(e){var t=ge.RichUtils.handleKeyCommand(K,e);return t?(D(t),"handled"):"not-handled"},handlePastedText:function(e){return e.length>260&&e.includes(".")&&M({blockText:e.split("\n")[0],blockKey:Zt(K).blockKey}),"not-handled"},stripPastedStyles:!0,decorators:st,ref:k,onTab:function(e){return e.preventDefault(),e.stopPropagation(),M(Zt(K)),H({msg:"Detecting references! Continue typing...",severity:"info"}),"handled"}},"stripPastedStyles",!0))),w.length>=1&&u.length>0&&i.a.createElement(Qt,{suggestions:w.filter((function(e){return"NoLinkFound!"!==e.text})),textSelection:O,onSelected:function(e){var n={text:e.text,extent:[e.startIndex,e.startIndex+e.text.length],blockKey:K.getSelection().getAnchorKey(),chartId:e.chartId},r=an(n,{feature:e.feature,values:[isNaN(Number(e.text))?e.text:Number(e.text)]},{},"@"),i=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=E("link-");return{type:"CREATE_LINK",linkId:r,attrs:n=Object(a.a)({docId:e,timestamp:Date.now()},t,{},n,{id:r})}}(c.id,r),l=_t([i.attrs],K);t(i),T([]),D(l)},onCreateLinkSelect:function(){t(te(!1)),Q(K.getSelection()),D(function(e,t){var n=t.getCurrentContent(),r=t.getSelection(),i=n.createEntity("TEXT_SELECTION","MUTABLE",Object(a.a)({},e)),c=e.startIndex,l=e.endIndex;e.isBackward&&(c=e.endIndex,l=e.startIndex);var o=i.getLastCreatedEntityKey(),u=r.merge({anchorOffset:c,focusOffset:l});i=ge.Modifier.replaceText(t.getCurrentContent(),u,e.text,t.getCurrentInlineStyle(),o);var s=ge.EditorState.push(t,i,"apply-entity"),d=s.getSelection().merge({focusOffset:e.endIndex,anchorOffset:e.endIndex});return s=ge.EditorState.moveSelectionToEnd(s),s=ge.EditorState.forceSelection(s,d)}(O,K)),H({msg:"Click on any chart avatar to begin linking!",severity:"info"})}}),i.a.createElement(Mt,{textSelection:O,selectedLink:s,onDiscard:function(e){var n=K.getSelection(),a=ge.ContentState.createFromText(""),r=ae(K),i=n.merge({anchorOffset:r.offset,focusOffset:r.offset+r.length});a=ge.Modifier.replaceText(K.getCurrentContent(),i,e.text,K.getCurrentInlineStyle());var c=ge.EditorState.push(K,a,"apply-entity"),l=c.getSelection().merge({focusOffset:e.endIndex,anchorOffset:e.endIndex});c=ge.EditorState.moveSelectionToEnd(c),c=ge.EditorState.forceSelection(c,l),D(c),t(it(e.id))},onAccept:function(e){var t=ae(K),n=JSON.parse(JSON.stringify(e));n.startIndex=t.offset,n.endIndex=t.offset+t.length,n.isConfirmed=!0,D(_t([n],K))}}),i.a.createElement(vt.a,{open:null!==G,anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:5e3,onClose:function(){H(null)}},i.a.createElement(Et,{severity:null===G||void 0===G?void 0:G.severity},null===G||void 0===G?void 0:G.msg)))}var cn=n(960),ln=n(936),on=n(934),un=n(496),sn=n.n(un),dn=n(1027),gn=n(1022),fn=Object(u.a)((function(e){return{root:{width:300,margin:e.spacing(1)}}}));function hn(e){var t=e.children,n=e.open,a=e.value;return i.a.createElement(gn.a,{open:n,enterTouchDelay:0,placement:"top",title:a},t)}function mn(e){var t,n,a=fn(),c=Object(r.useState)(""),l=Object(se.a)(c,2),o=l[0],u=l[1],s=i.a.useState(null),d=Object(se.a)(s,2),g=d[0],f=d[1],m=i.a.useState(null),p=Object(se.a)(m,2),v=p[0],b=p[1],y=Object(r.useState)([{value:1900,label:1900},{value:2e3,label:2e3}]),O=Object(se.a)(y,2),S=O[0],k=O[1],j=Object(r.useState)(!1),x=Object(se.a)(j,2),I=x[0],A=x[1],C=Object(r.useState)(null),w=Object(se.a)(C,2),T=w[0],N=w[1],L=Object(r.useState)([]),R=Object(se.a)(L,2),J=R[0],K=R[1],D=e.chartProperties,F=D.axes.map((function(e){return null===e||void 0===e?void 0:e.field})),B=Object(we.a)(new Set(D.features.map((function(e){return e.field}))));function Q(t){if(!Array.isArray(t)){u(t);var n,a,r=(n=D.axes,a=t,n.find((function(e){return(null===e||void 0===e?void 0:e.field)===a})));if(r&&!["ordinal","band","point"].includes(null===r||void 0===r?void 0:r.type)){var i=function(e){for(var t,n=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,r=e.length-1;r>=0;r--)(t=+e[r])<n&&(n=t),t>a&&(a=t);return[n,a]}(e.viewData.map((function(e){return e[t]}))),c=Object(se.a)(i,2),l=c[0],o=c[1];if(["date","year","month","time","year_year"].includes(null===t||void 0===t?void 0:t.toLowerCase())||"temporal"===(null===r||void 0===r?void 0:r.type)){var s=new Date(l),d=new Date(o),g=[{value:l,label:s.toLocaleDateString(),type:"date"},{value:o,label:d.toLocaleDateString(),type:"date"}];k(g),f([g[0].value,g[1].value])}else{var h=[{value:l,label:l.toLocaleString()},{value:o,label:o.toLocaleString()}];k(h),f([h[0].value,h[1].value])}b(null),A(!0)}if(!r||["ordinal","band","point","string"].includes(null===r||void 0===r?void 0:r.type)){var m,p=null===D||void 0===D?void 0:D.features.filter((function(e){return(null===e||void 0===e?void 0:e.field)===t}));p||(p=null===D||void 0===D?void 0:null===(m=D.features)||void 0===m?void 0:m.filter((function(e){var n;return(null===e||void 0===e?void 0:null===(n=e.properties)||void 0===n?void 0:n.field)===t}))),K(p),f(null),A(!1)}}}return F=F.concat(B),F=Object(we.a)(new Set(F)),Object(r.useEffect)((function(){e.onFilterUpdate(e.id,{field:o,intervalValues:g,features:v})}),[g,v]),Object(r.useEffect)((function(){Q(F[0])}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement(V.a,{className:a.root,container:!0,spacing:1},i.a.createElement(V.a,{item:!0,xs:1},i.a.createElement(We.a,{"aria-label":"close",className:a.margin,size:"small"},i.a.createElement(sn.a,{fontSize:"inherit",onMouseDown:function(){return e.onDelete(e.id)}}))),i.a.createElement(V.a,{item:!0,xs:6},i.a.createElement(on.a,{className:a.formControl},i.a.createElement(cn.a,{htmlFor:"age-native-simple"},"Field"),i.a.createElement(qe.a,{native:!0,value:o,onChange:function(e){Q(e.target.value)}},F.map((function(e){return i.a.createElement("option",{key:E(e),value:e},e)})))))),i.a.createElement(V.a,{container:!0,spacing:1},i.a.createElement(V.a,{item:!0,xs:1}),i.a.createElement(V.a,{item:!0,xs:10},!I&&i.a.createElement(dn.a,{multiple:!0,id:"combo-box-demo",options:J,getOptionLabel:function(e){return null===e||void 0===e?void 0:e.value},onChange:function(e,t){t&&b(t)},size:"small",renderInput:function(e){return i.a.createElement(h.a,Object.assign({},e,{label:"Select Values",variant:"outlined"}))}}))),i.a.createElement(V.a,{container:!0,spacing:1},i.a.createElement(V.a,{item:!0,xs:1}),i.a.createElement(V.a,{item:!0,xs:10},I&&i.a.createElement(Qe.a,{value:g,onChange:function(e,t){f(t)},valueLabelDisplay:"auto",ValueLabelComponent:hn,"aria-labelledby":"range-slider",marks:S,min:null===(t=S[0])||void 0===t?void 0:t.value,max:null===(n=S[1])||void 0===n?void 0:n.value,valueLabelFormat:function(e){var t;return i.a.createElement("div",null,"date"===(null===(t=S[0])||void 0===t?void 0:t.type)?new Date(e).toLocaleDateString():e.toLocaleString())}}))),i.a.createElement(vt.a,{open:null!==T,anchorOrigin:{vertical:"bottom",horizontal:"left"},autoHideDuration:5e3,onClose:function(){N(null)}},i.a.createElement(Et,{severity:"info"},T)))}var pn=Object(u.a)((function(e){return{chartAvatars:{display:"flex","& > *":{margin:e.spacing(1)}},root:{margin:e.spacing(1)}}}));function vn(e){var t=Object(m.c)(),n=pn(),a=Object(r.useState)(""),c=Object(se.a)(a,2),l=c[0],o=c[1],u=Object(r.useState)(!1),s=Object(se.a)(u,2),d=s[0],f=s[1],h=Object(r.useState)(null),p=Object(se.a)(h,2),v=p[0],b=p[1],y=Object(r.useState)([]),O=Object(se.a)(y,2),S=O[0],k=O[1],j=Object(r.useState)([]),x=Object(se.a)(j,2),I=x[0],A=x[1],C=Object(r.useState)(null),w=Object(se.a)(C,2),T=w[0],N=w[1],L=e.selectedChart.properties,R=L.axes.map((function(e){return null===e||void 0===e?void 0:e.field})),J=Object(we.a)(new Set(L.features.map((function(e){return e.field}))));R=R.concat(J),R=Object(we.a)(new Set(R));function K(t,n,a,r){var i=null;if(n.length>0){for(var c,l=[],u=0;u<n.length;u++)for(var s=0;s<r.length;s++)n[u].values[0]===r[s]._vgsid_&&l.push(r[s]);var d,g=[];k(l),l.forEach((function(e){var t,n,a,r;(d=null===L||void 0===L?void 0:L.axes.filter((function(e){return["ordinal","band","point"].includes(e.type)}))[0],e.hasOwnProperty("properties"))?(d=null===L||void 0===L?void 0:L.features.filter((function(e){return"Feature"!=(null===e||void 0===e?void 0:e.value)}))[0],e.properties[null===(n=d)||void 0===n?void 0:n.field]?g.push(e.properties[null===(a=d)||void 0===a?void 0:a.field]):g.push(e[null===(r=d)||void 0===r?void 0:r.field])):g.push(e[null===(t=d)||void 0===t?void 0:t.field])}));var f={field:null===(c=d)||void 0===c?void 0:c.field};o(f.field);var h={text:t.text,extent:[e.textSelection.startIndex,e.textSelection.endIndex],blockKey:e.textSelection.blockKey,chartId:e.selectedChart.id};i=an(h,{feature:f,values:g},{})}if(a.length>0){var m,p,v,b,E,y,O,S,j,x,I,A,C=[],w=[];if(2===a[0].fields.length&&"R"===a[0].fields[0].type&&"R"===a[0].fields[1].type)C.push(a[0].fields[0].field),C.push(a[0].fields[1].field),w.push.apply(w,Object(we.a)(a[0].values[0]).concat(Object(we.a)(a[0].values[1]))),m=[],o(a[0].fields[0].field);else"E"===(null===(v=a[0])||void 0===v?void 0:null===(b=v.fields[0])||void 0===b?void 0:b.type)&&"R"===(null===(E=a[0])||void 0===E?void 0:null===(y=E.fields[1])||void 0===y?void 0:y.type)&&(p=a[0].fields[0].field,m=a[0].values[0]),"R"===(null===(O=a[0])||void 0===O?void 0:null===(S=O.fields[0])||void 0===S?void 0:S.type)&&"E"===(null===(j=a[0])||void 0===j?void 0:null===(x=j.fields[1])||void 0===x?void 0:x.type)&&(p=a[0].fields[1].field,m=a[0].values[1]),1===a[0].fields.length&&"R"===(null===(I=a[0])||void 0===I?void 0:null===(A=I.fields[0])||void 0===A?void 0:A.type)&&(p=a[0].fields[0].field,m=[],C.push(p),w.push.apply(w,Object(we.a)(a[0].values[0]))),o(p);var T={text:t.text,extent:[e.textSelection.startIndex,e.textSelection.endIndex],blockKey:e.textSelection.blockKey,chartId:e.selectedChart.id};i=an(T,{feature:{field:p},values:m},{rangeField:C,range:w})}return i}function D(e){var t=I.filter((function(t){return t.id!==e}));A(t)}function F(e,t){var n=Object(we.a)(I);n.find((function(t){return t.id===e})).props=t,A(n)}return Object(r.useEffect)((function(){if(e.selectedMarks.length>0){f(!0);var t=K(e.textSelection,e.selectedMarks,e.brush,e.viewData);b(t)}if(e.brush.length>0){f(!0);var n=K(e.textSelection,e.selectedMarks,e.brush,e.viewData);b(n)}}),[e.selectedMarks,e.brush]),i.a.createElement(i.a.Fragment,null,"filter"===e.mode&&i.a.createElement(g.a,{variant:"contained",size:"small",onMouseDown:function(){A([].concat(Object(we.a)(I),[{id:E("filter-"),props:{}}]))}},"+Add Selection"),i.a.createElement(V.a,{container:!0,spacing:3},i.a.createElement(V.a,{item:!0,xs:12},i.a.createElement("div",null,I.length>0&&I.map((function(t){return i.a.createElement(mn,{key:t.id,chartProperties:L,viewData:e.viewData,id:t.id,onDelete:D,onFilterUpdate:F})}))))),I.length>0&&i.a.createElement(g.a,{variant:"contained",size:"small",onMouseDown:function(){var n={text:e.textSelection.text,extent:[e.textSelection.startIndex,e.textSelection.endIndex],blockKey:e.textSelection.blockKey,chartId:e.selectedChart.id},a={},r=[],i=[];I.forEach((function(e){e.props.features&&(a={feature:{field:e.props.field},values:e.props.features.map((function(e){return e.value}))}),e.props.intervalValues&&(r.push(e.props.field),i.push.apply(i,Object(we.a)(e.props.intervalValues)))}));var c=an(n,a,{rangeField:r,range:i}),l=rt(e.currentDoc.id,[c]);t(ee(l.links[0].id)),t($(null)),t(te(!0)),t(l),N("Link created successfully!")}},"Save"),(e.textSelection&&d||e.showSelectedLinkSetting)&&"brush"===e.mode&&i.a.createElement("div",{className:n.root},0===e.brush.length&&i.a.createElement(on.a,{className:n.formControl},i.a.createElement(cn.a,{htmlFor:"age-native-simple"},"Axis"),i.a.createElement(qe.a,{native:!0,value:l,onChange:function(e){var t=e.target.value;o(t),v.data=S.map((function(e){return e[t]})),b(v)}},R.map((function(e){return i.a.createElement("option",{key:E(e),value:e},e)}))),i.a.createElement(ln.a,null,"Choose which field to link to!")),i.a.createElement("div",null,i.a.createElement(Wt.a,{size:"small",variant:"contained","aria-label":"small button group"},i.a.createElement(g.a,{onMouseDown:function(n){if(n.preventDefault(),n.stopPropagation(),null!==v){v.feature={field:l};var a=rt(e.currentDoc.id,[v]);t(a),t(ee(a.links[0].id))}else t(ee(null));t($(null)),t(te(!0)),N("Link created successfully!")}},"Save"),i.a.createElement(g.a,{onMouseDown:function(e){t(te(!0)),e.preventDefault(),e.stopPropagation(),t($(null))}},"Cancel")))),i.a.createElement(vt.a,{open:null!==T,anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:5e3,onClose:function(){N(null)}},i.a.createElement(Et,{severity:"success"},T)))}var bn=Object(u.a)((function(e){return{root:{width:300}}}));function En(e){var t=Object(m.c)(),n=bn(),a=Object(m.d)((function(e){return e.ui.showLinkSettingFor})),c=Object(r.useState)([20,37]),l=Object(se.a)(c,2),o=l[0],u=(l[1],Object(r.useState)([{value:1900,label:1900},{value:2e3,label:2e3}])),s=Object(se.a)(u,2),d=s[0],f=(s[1],Object(r.useState)("")),p=Object(se.a)(f,2),v=p[0],b=p[1],y=Object(r.useState)(null),O=Object(se.a)(y,2),S=(O[0],O[1],Object(r.useState)(!1)),k=Object(se.a)(S,2),j=k[0],x=k[1],I=Object(r.useState)("Hello"),A=Object(se.a)(I,2),C=A[0],w=A[1],T=e.selectedChart.properties,N=T.axes.map((function(e){return null===e||void 0===e?void 0:e.field})),L=Object(we.a)(new Set(T.features.map((function(e){return e.field}))));N=N.concat(L),N=Object(we.a)(new Set(N));return Object(r.useEffect)((function(){var t,n,a,r;b(null===(t=e.showLinkSettingFor)||void 0===t?void 0:null===(n=t.feature)||void 0===n?void 0:n.field),["ordinal","band","point","string"].includes(null===(a=e.showLinkSettingFor)||void 0===a?void 0:null===(r=a.feature)||void 0===r?void 0:r.type)?(console.log("Link props updated.....",e.showLinkSettingFor.data),w(e.showLinkSettingFor.data)):x(!0)}),[e.showLinkSettingFor]),i.a.createElement(i.a.Fragment,null,e.showLinkSettingFor&&i.a.createElement("div",{className:n.root},i.a.createElement(on.a,{className:n.formControl},i.a.createElement(cn.a,{htmlFor:"age-native-simple"},"Link Field"),i.a.createElement(qe.a,{native:!0,value:v,onChange:function(e){}},N.map((function(e){return i.a.createElement("option",{key:E(e),value:e},e)}))),i.a.createElement(ln.a,null,"Some important helper text")),i.a.createElement(on.a,{fullWidth:!0,className:n.margin},i.a.createElement(h.a,{id:"standard-multiline-flexible",label:"Link Data",multiline:!0,rowsMax:4,value:C,onChange:function(e){w(e.target.value),console.log(C)}})),j&&i.a.createElement("div",null,i.a.createElement(R.a,{id:"range-slider",gutterBottom:!0},"Interval range"),i.a.createElement(Qe.a,{value:o,onChange:function(e,t){},valueLabelDisplay:"auto","aria-labelledby":"range-slider",marks:d,min:d[0].value,max:d[1].value})," "),i.a.createElement(Y.a,{elevation:1},i.a.createElement(Wt.a,{size:"small",variant:"text",fullWidth:!0,"aria-label":"small button group"},i.a.createElement(g.a,{onMouseDown:function(e){console.log("link to update",a,C.toString().split("\n"));var n=C.toString().split("\n"),r={type:"UPDATE_LINK",linkId:a.id,attrs:{data:n}};t(r),t(re(null))}},"Update"),i.a.createElement(g.a,{onMouseDown:function(e){}},"Cancel")))))}var yn=n(168),On=n.n(yn),Sn=Object(u.a)((function(e){return{hidden:{display:"none"}}}));function kn(e){var t=Sn(),n=Object(r.useState)(null),a=Object(se.a)(n,2),c=(a[0],a[1]),l=Object(r.useRef)(null),o=Object(r.useRef)(null),u=Object(r.useState)(1),s=Object(se.a)(u,2),d=(s[0],s[1]),g=Object(de.f)().docId,f=Object(m.d)((function(e){return e.docs[g]})),h=Object(r.useState)([]),p=Object(se.a)(h,2),v=p[0],b=p[1],E=Object(r.useState)([]),y=Object(se.a)(E,2),O=y[0],S=y[1],k=Object(r.useState)([]),j=Object(se.a)(k,2),x=j[0],I=j[1],A=Object(r.useState)(!1),C=Object(se.a)(A,2),w=C[0],T=C[1],N=Object(m.d)((function(e){return e.ui.selectedLink})),L=e.chart,R=Object(r.useMemo)((function(){return Le(L.highlight,JSON.parse(JSON.stringify(L.liteSpec)),!0)}),[L.spec,L.highlight]);Object(r.useEffect)((function(){(function(){var e=Object(Ae.a)(Ie.a.mark((function e(){var t,n,a,r,i,l,u;return Ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(Ke.a)(R),e.next=3,new De.a(t).runAsync();case 3:return n=e.sent,e.next=6,n.toCanvas();case 6:return a=e.sent,r=a.height/a.width,d(r),e.next=11,Object(Re.a)(null===o||void 0===o?void 0:o.current,R,{actions:!1});case 11:i=e.sent,l=i.view,u=L.liteSpec.data.hasOwnProperty("url")?l.data("source_0"):l.data("data_0"),S(u);try{l.addDataListener("paintbrush_store",(function(e,t){b(v.concat(t))})),l.addDataListener("brush_store",(function(e,t){I(x.concat(t))}))}catch(s){}c(l);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[R]);return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{ref:l,style:{position:"relative",width:"fit-content"}},i.a.createElement("div",null,"filter"!==e.mode&&i.a.createElement("div",{style:{display:"flex"}},i.a.createElement(We.a,{onMouseDown:function(){T(!w)},"aria-label":"settings"},i.a.createElement(Ue.a,null)),i.a.createElement(gn.a,{placement:"right-start",title:"Use brushing to select visual marks on the chart! Hold down the SHIFT key to select multiple marks!"},i.a.createElement(We.a,{style:{marginTop:"0px"},"aria-label":"help"},i.a.createElement(On.a,null))))),i.a.createElement("div",{className:"filter"===e.mode?t.hidden:"",ref:o}),w&&i.a.createElement(Xe,{chart:L}),e.textSelection&&i.a.createElement(vn,{currentDoc:f,selectedChart:L,textSelection:e.textSelection,selectedMarks:v,brush:x,viewData:O,mode:e.mode}),e.showLinkSettingFor&&i.a.createElement(En,{currentDoc:f,selectedChart:L,selectedMarks:v,brush:x,viewData:O,showLinkSettingFor:e.showLinkSettingFor,selectedLink:N})))}var jn=n(1023),xn=n(1032),In=n(498),An=n.n(In),Cn=n(497),wn=n.n(Cn),Tn=Object(u.a)((function(e){return{chartAvatars:{display:"flex","& > *":{margin:e.spacing(1)}},root:{width:300},toggleBtn:{margin:e.spacing(1)},largeAvatar:{width:e.spacing(7),height:e.spacing(7)},largeAvatarActive:{width:e.spacing(7),height:e.spacing(7),border:"1px solid #5e5d5d"}}}));function Nn(){var e=Tn(),t=Object(de.f)().docId,n=Object(m.d)((function(e){return I(e,t)})),a=Object(m.d)((function(e){return e.ui.textSelection})),c=Object(m.d)((function(e){return e.ui.showLinkSettingFor})),l=Object(r.useState)(null),o=Object(se.a)(l,2),u=o[0],s=o[1],d=Object(r.useState)("brush"),g=Object(se.a)(d,2),f=g[0],h=g[1],p=Object(r.useState)(!1),v=Object(se.a)(p,2),b=v[0],E=v[1];return Object(r.useEffect)((function(){a?(E(!0),h("brush")):(E(!1),s(null))}),[a]),Object(r.useEffect)((function(){s(n.filter((function(e){return e.id===(null===c||void 0===c?void 0:c.chartId)})).pop())}),[c]),i.a.createElement(i.a.Fragment,null,b&&i.a.createElement("div",{className:e.root},i.a.createElement("div",{style:{display:"flex"}},i.a.createElement(R.a,{variant:"overline",display:"block",gutterBottom:!0},"Link Setting"),i.a.createElement(gn.a,{placement:"right-start",title:"Click on any chart to begin creating references!"},i.a.createElement(We.a,{style:{marginTop:"-8px"},size:"small","aria-label":"help"},i.a.createElement(On.a,null)))),i.a.createElement("div",{className:e.chartAvatars},n.map((function(t){return i.a.createElement(yt.a,{key:t.id,src:t.thumbnail,variant:"rounded",className:t.id===(null===u||void 0===u?void 0:u.id)?e.largeAvatarActive:e.largeAvatar,onClick:function(){return function(e){s(u!=e?e:null)}(t)}})}))),u&&i.a.createElement(xn.a,{className:e.toggleBtn,value:f,exclusive:!0,onChange:function(e,t){null!==t&&h(t)},"aria-label":"text alignment",size:"small"},i.a.createElement(jn.a,{value:"brush","aria-label":"left aligned"},i.a.createElement(wn.a,null)),i.a.createElement(jn.a,{value:"filter","aria-label":"centered"},i.a.createElement(An.a,null))),u&&i.a.createElement(kn,{mode:f,textSelection:a,chart:u})),c&&i.a.createElement("div",{className:e.root},i.a.createElement(R.a,{variant:"overline",display:"block",gutterBottom:!0},"Link Setting"),i.a.createElement("div",{className:e.chartAvatars},n.map((function(t){return i.a.createElement(yt.a,{key:t.id,src:t.thumbnail,variant:"rounded",className:t.id===(null===c||void 0===c?void 0:c.chartId)?e.largeAvatarActive:e.largeAvatar})}))),u&&i.a.createElement(kn,{textSelection:a,chart:u,showLinkSettingFor:c})),!b&&i.a.createElement(r.Fragment,null,i.a.createElement(R.a,{variant:"button",display:"block",gutterBottom:!0},"Useful Shortcuts"),i.a.createElement(R.a,{variant:"caption",display:"block",gutterBottom:!0},"\ud83d\udc49 Press ",i.a.createElement("strong",null,"Tab key")," while at the end of a sentence or paragraph to get automatic suggestions!"),i.a.createElement(R.a,{variant:"caption",display:"block",gutterBottom:!0},"\ud83d\udc49 Type ",i.a.createElement("strong",null,"@")," or ",i.a.createElement("strong",null," select portion of text")," to triggers suggestions!")))}function Ln(e){var t=Object(m.c)();return Object(r.useEffect)((function(){t(ne(!1))}),[]),i.a.createElement(V.a,{container:!0,spacing:2},i.a.createElement(V.a,{item:!0,xs:2},i.a.createElement("div",{style:{display:"flex"}},i.a.createElement(R.a,{variant:"overline",display:"block",gutterBottom:!0},"Chart Gallery"),i.a.createElement(gn.a,{placement:"right-start",title:"Drop VegaLite specifications to add charts!"},i.a.createElement(We.a,{style:{marginTop:"-8px"},size:"small","aria-label":"help"},i.a.createElement(On.a,null)))),i.a.createElement(Ct,null)),i.a.createElement(V.a,{item:!0,xs:7},i.a.createElement(rn,null)),i.a.createElement(V.a,{item:!0,xs:3},i.a.createElement(Nn,null)))}var Rn=n(1024);var Jn=function(){return i.a.createElement(o.a,null,i.a.createElement(N,null),i.a.createElement(Rn.a,{maxWidth:"lg",mt:2},i.a.createElement(de.c,null,i.a.createElement(de.a,{path:"/docs/:docId/view"},i.a.createElement(gt,null)),i.a.createElement(de.a,{path:"/docs/:docId"},i.a.createElement(Ln,null)),i.a.createElement(de.a,{path:"/docs"},i.a.createElement(ue,null)),i.a.createElement(de.a,{path:"/"},i.a.createElement(H,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Kn=n(499),Dn=n(500),Vn=n.n(Dn),Fn=n(164),Bn=Object(Fn.b)({docs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_DOC":case"UPDATE_DOC":return Object(a.a)({},e,Object(p.a)({},t.docId,Object(a.a)({},e[t.docId]||{},{},t.attrs)));case"DELETE_DOC":var n=Object(a.a)({},e);return delete n[t.docId],n;case"CREATE_CHART":return Object(a.a)({},e,Object(p.a)({},t.attrs.docId,Object(a.a)({},e[t.attrs.docId],{charts:e[t.attrs.docId].charts.concat(t.chartId)})));case"DELETE_CHART":return Object(a.a)({},e,Object(p.a)({},t.attrs.docId,Object(a.a)({},e[t.attrs.docId],{charts:e[t.attrs.docId].charts.filter((function(e){return e!==t.chartId}))})));case"UPDATE_CHARTS_IN_EDITOR":return Object(a.a)({},e,Object(p.a)({},t.docId,Object(a.a)({},e[t.docId],{chartsInEditor:t.charts})));case"UPDATE_EDITOR_STATE":return Object(a.a)({},e,Object(p.a)({},t.docId,Object(a.a)({},e[t.docId],{editorRawState:t.editorRawState})));default:return e}},charts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_CHART":case"UPDATE_CHART":return Object(a.a)({},e,Object(p.a)({},t.chartId,Object(a.a)({},e[t.chartId]||{},{},t.attrs)));case"DELETE_CHART":var n=Object(a.a)({},e);return delete n[t.chartId],n;default:return e}},links:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_LINK":case"UPDATE_LINK":return Object(a.a)({},e,Object(p.a)({},t.linkId,Object(a.a)({},e[t.linkId]||{},{},t.attrs)));case"CREATE_LINKS":return t.links.reduce((function(e,t){return Object(a.a)({},e,Object(p.a)({},t.id,t))}),e);case"DELETE_LINK":var n=Object(a.a)({},e);return delete n[t.linkId],n;case"ACTIVATE_LINK":return Object(a.a)({},e,Object(p.a)({},t.linkId,Object(a.a)({},e[t.linkId],{active:!0})));case"DEACTIVATE_LINK":return Object(a.a)({},e,Object(p.a)({},t.linkId,Object(a.a)({},e[t.linkId],{active:!1})));case"CONFIRM_LINK":return Object(a.a)({},e,Object(p.a)({},t.linkId,Object(a.a)({},e[t.linkId],{isConfirmed:!0})));default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SELECTED_LINK":return Object(a.a)({},e,{selectedLink:t.link});case"SET_TEXT_SELECTION":return Object(a.a)({},e,{textSelection:t.textSelection});case"SET_MANUAL_LINK_ID":return Object(a.a)({},e,{manualLinkId:t.linkId});case"EXIT_MANUAL_LINK_MODE":return Object(a.a)({},e,{exitManualLink:t.exit});case"SET_CURRENT_DOC_ID":return Object(a.a)({},e,{currentDocId:t.docId});case"SET_VIEW_MODE":return Object(a.a)({},e,{viewMode:t.val});case"LINK_ACTIVE_NO_AUTO_TRIGGER":return Object(a.a)({},e,{linkActiveNoAutoTrigger:t.val});case"SHOW_LINK_SETTING_FOR":return Object(a.a)({},e,{showLinkSettingFor:t.val});default:return e}}}),Qn=n(331),qn=n.n(Qn),Xn=n(501),Wn=n(1025),Mn=Object(Xn.a)({palette:{primary:{main:"#2196f3"},secondary:{main:"#e91e63"},info:{main:"#1976d2"},error:{main:"#f44336"},warning:{main:"#ff9800"},success:{main:"#4caf50"}},secondary:{main:"#e91e63"},info:{main:"#1976d2"},error:{main:"#f44336"},warning:{main:"#ff9800"},success:{main:"#4caf50"},textSecondary:{main:"#bdbdbd"}});new Promise((function(e,t){qn.a.getItem("state").then((function(t){e(t)})).catch((function(e){t(e)}))})).then((function(e){Vn.a,Object(Kn.createLogger)();var t=Object(Fn.c)(Bn,e||{});t.subscribe(Je((function(){var e=Object(a.a)({},t.getState());delete e.ui,qn.a.setItem("state",e)}),1e3)),l.a.render(i.a.createElement(m.a,{store:t},i.a.createElement(Wn.a,{theme:Mn},i.a.createElement(Jn,null))),document.getElementById("root"))})).catch((function(e){console.log(e),l.a.render(i.a.createElement("div",null,"Failed to initialize data!"),document.getElementById("root"))})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[527,1,2]]]);
//# sourceMappingURL=main.7997a8a3.chunk.js.map